(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,a,c,u,l,s,i,m,d,v,f,g,p,h,y,E,S,q,L,b,A,w,C,x,k,I,_,P,T;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(e){return(parseInt(e,10)<10?"0":"")+e}var a=setInterval((function(){var e,c,u,l,s=(e=(new Date("31 may 2021").getTime()-(new Date).getTime())/1e3,c=Math.floor(e%60),u=Math.floor(e/60%60),l=Math.floor(e/60/60)%24,Math.floor(e/60/60/24),{hours:l,minuts:u,seconds:c,timeRemaining:e});s.timeRemaining>0?(t.textContent=r(s.hours),n.textContent=r(s.minuts),o.textContent=r(s.seconds)):(t.textContent="00",n.textContent="00",o.textContent="00",clearInterval(a))}),1e3)})(),C=document.querySelectorAll("input.calc-item"),x=document.querySelectorAll("[name=user_name]"),k=document.querySelectorAll("[name=user_message]"),I=document.querySelectorAll("[name=user_email]"),_=document.querySelectorAll("[name=user_phone]"),P=function(e){e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-");var t=new RegExp("ReGeX"+e.value+"ReGeX");/^[/ /-]/.test(t)&&(e.value=e.value.replace(/^[/ /-]/,"")),/[/ /-]$/.test(t)&&(e.value=e.value.replace(/[/ /-]$/,""))},T=function(e,t){e.value.match(t)||(e.value="")},x.forEach((function(e){e.addEventListener("blur",(function(){P(e),e.value=e.value.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "),T(e,/[а-яё]{2,}/gi)}))})),k.forEach((function(e){e.addEventListener("blur",(function(){T(e,/[а-яё0-9\.\,\:\-\!\?\ ]/gi),P(e)}))})),I.forEach((function(e){e.required=!0,e.addEventListener("blur",(function(){P(e),T(e,/\w+@\w+\.\w{2,3}/g)}))})),_.forEach((function(e){e.addEventListener("blur",(function(){P(e),T(e,/\+?([-()]*\d){7,}/g)}))})),window.addEventListener("input",(function(e){e.target.matches(".calc-item")&&C.forEach((function(e){e.value=e.value.replace(/[^\d]/g,"")})),e.target.matches("[name=user_name]")&&(e.target.value=e.target.value.replace(/[^а-яё\-\ ]/gi,"")),e.target.matches("#form2-message")&&(e.target.value=e.target.value.replace(/[^а-яё0-9\.\,\:\-\!\?\ ]/gi,"")),e.target.matches("[name=user_email]")&&(e.target.value=e.target.value.replace(/[^a-z\@\_\-\.\!\~\*\']/gi,"")),e.target.matches("[name=user_phone]")&&(e.target.value=e.target.value.replace(/[^\d\(\)\-\+]/g,""),e.target.value.length>10&&(e.target.value=e.target.value.substring(0,11)))})),A=document.querySelector("body"),w=document.querySelector("menu"),document.querySelectorAll(".scroll-link").forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href");document.querySelector(""+n).scrollIntoView({behavior:"smooth",block:"start"})}))})),A.addEventListener("click",(function(e){var t=e.target;w.classList.contains("active-menu")?t.closest(".menu")||t!==w&&t.closest('[href^="#"]')?w.classList.toggle("active-menu"):t.closest("menu")||w.classList.toggle("active-menu"):t.closest(".menu")&&w.classList.toggle("active-menu")})),E=document.querySelector(".popup"),S=document.querySelectorAll(".popup-btn"),q=document.querySelector(".popup-content"),L={count:-445,speed:20,startPos:-445,endPos:0},b=function e(){L.startPos>L.endPos?L.count-=L.speed:L.count+=L.speed,q.style.transform="translateY(".concat(L.count,"px)"),(L.startPos>L.endPos?L.count>L.endPos:L.count<L.endPos)&&requestAnimationFrame(e)},S.forEach((function(e){e.addEventListener("click",(function(){E.style.display="block",screen.width>768&&(L.count=L.startPos,requestAnimationFrame(b))}))})),E.addEventListener("click",(function(e){var t=event.target;t.classList.contains("popup-close")?E.style.display="none":(t=t.closest(".popup-content"))||(E.style.display="none")})),p=document.querySelector(".service-header"),h=p.querySelectorAll(".service-header-tab"),y=document.querySelectorAll(".service-tab"),p.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&h.forEach((function(e,n){e===t&&function(e){for(var t=0;t<y.length;t++)e===t?(h[t].classList.add("active"),y[t].classList.remove("d-none")):(h[t].classList.remove("active"),y[t].classList.add("d-none"))}(n)}))})),f=document.querySelectorAll(".portfolio-item"),g=document.querySelector(".portfolio-dots"),f.forEach((function(){var e=document.createElement("li");e.classList.add("dot"),g.appendChild(e)})),g.children[0].classList.add("dot-active"),c=document.querySelectorAll(".portfolio-item"),u=document.querySelectorAll(".dot"),l=document.querySelector(".portfolio-content"),s=0,i=function(e,t,n){e[t].classList.remove(n)},m=function(e,t,n){e[t].classList.add(n)},d=function(){i(c,s,"portfolio-item-active"),i(u,s,"dot-active"),s=s<c.length-1?s+1:0,m(c,s,"portfolio-item-active"),m(u,s,"dot-active")},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3;a=setInterval(d,e)},l.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(i(c,s,"portfolio-item-active"),i(u,s,"dot-active"),t.matches("#arrow-right")?s++:t.matches("#arrow-left")?s--:t.matches(".dot")&&u.forEach((function(e,n){e===t&&(s=n)}))),s>=c.length&&(s=0),s<0&&(s=c.length-1),m(c,s,"portfolio-item-active"),m(u,s,"dot-active")})),l.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),l.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&v()})),v(4500),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total"),u=function(){var t=0,u=1,l=1,s=n.options[n.selectedIndex].value,i=+o.value;a.value>1&&(u+=(a.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),s&&i&&(t=e*s*i*u*l),c.textContent=Math.round(t)};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&u()}))}(100),o=function(e){var t=e.target;t.matches(".form-phone")&&(t.value=t.value.replace(/[^+\d]/g,"")),"user_name"===t.name&&(t.value=t.value.replace(/[^а-яё ]/gi,"")),t.matches(".mess")&&(t.value=t.value.replace(/[^а-яё ,.]/gi,""))},r=function(t){var n=document.createElement("div"),r=function(e){var t=document.createElement("img"),o={load:{message:" Загрузка...",img:"./images/message/waiting.gif"},error:{message:" Что-то пошло не так...",img:"./images/message/Err.png"},success:{message:" Спасибо! Мы скоро с вами свяжемся!",img:"./images/message/OK.png"}};n.textContent=o[e].message,t.src=o[e].img,t.height=50,setTimeout((function(){n.textContent=""}),2e3),n.insertBefore(t,n.firstChild)};n.style.cssText="font-size: 2rem; color: #fff",t.addEventListener("submit",(function(o){var a;o.preventDefault(),r("load"),t.appendChild(n),(a=Object.fromEntries(new FormData(t)),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).then((function(n){if(200!==n.status)throw new Error("Status network ".concat(request.status));r("success"),function(t){var n;(n=t.elements,function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()&&"button"!==e.type})).forEach((function(e){return e.value=""}))}(t)})).catch((function(e){r("error")}))})),t.addEventListener("input",o)},document.querySelectorAll("form").forEach((function(e){return r(e)})),t=document.querySelector("#command .row"),n=function(){var e=event.target;if(e.classList.contains("command__photo")){var t=e.src;e.src=e.dataset.img,e.dataset.img=t}},t.addEventListener("mouseover",n),t.addEventListener("mouseout",n)})();